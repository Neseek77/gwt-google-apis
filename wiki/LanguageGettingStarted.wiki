#summary Getting Started Using the Google Language API for GWT

= Getting Started with the Language API =

== Assumptions ==

TODO(zundel): Port these instructions to GWT 1.6
 
  * You are familiar with [http://code.google.com/webtoolkit/overview.html Google Web Toolkit].
  * You know how to [http://code.google.com/docreader/#p(google-web-toolkit-doc-1-5)s(google-web-toolkit-doc-1-5)t(GettingStartedCreateProject) create a new GWT project] and import it into the Eclipse IDE environment using the `projectCreator` and `applicationCreator` tools.
  * You are familiar with [http://code.google.com/apis/ajaxlanguage/ Google Language API].

== Downloading the Language API Library for GWT ==

You can download the latest production releases of the libraries from the [http://code.google.com/p/gwt-google-apis/downloads/ project download page]. After you download the distribution, uncompress it.  Inside the folder you will find a .jar file named `gwt-language.jar`. This .jar file is the only thing you'll need from the distribution. 

You can reference the `.jar` file either from the folder that you uncompressed the project in, or copy it and reference it from another location.  In this example, we've chosen to copy the file to the path `/usr/local/gwt-language`.

== Setting up a GWT Project to use the Language API===

_Note: these instructions are designed to work with the GWT 1.5 release._

There are three steps needed to use the Language API in a GWT project:

   # Include the library JAR file in the classpath
   # Inherit com.google.gwt.language.Language in the module XML definition file. 
   # Include a `<script>` tag in your html page in order to load the API.

We'll explain each step as we set up a new project.

== Creating a New GWT Project ==

Start by creating a new GWT project called !SimpleLanguage as described in the [http://code.google.com/docreader/#p(google-web-toolkit-doc-1-5)s(google-web-toolkit-doc-1-5)t(GettingStarted) GWT Getting Started Guide]. 

For the purposes of this example we assume `gwt-language.jar` has been unpacked in `/usr/local/gwt-language` and that you are using the Eclipse IDE.  Since we are working with an additional library, we use the command line argument `-addToClassPath` which adds the library `/usr/local/gwt-language/gwt-language.jar` to the Java classpath for the launch, compile and and Eclipse definitions. 

We also need to tell the GWT compiler that we are using the Language module. To do this, we use the command line argument `-addToModule` and specify `com.google.gwt.language.Language` as the module to be inherited. This will place the inheritance entry `Language.gwt.xml` into the generated project file `SimpleLanguage.gwt.xml`.


{{{
$PP_OFF
$ projectCreator -eclipse SimpleLanguage -out SimpleLanguage \
     -addToClassPath /usr/local/gwt-language/gwt-language.jar

$ applicationCreator -eclipse SimpleLanguage -out SimpleLanguage \
     -addToClassPath /usr/local/gwt-language/gwt-language.jar \
     -addModule com.google.gwt.language.Language com.example.simplelang.client.SimpleLanguage
}}}


Now you should now have a standard project set up. Before continuing, test out compilation with the `SimpleLanguage-compile` script.

{{{
$PP_OFF
$ ./SimpleLanguage-compile
Compiling module com.example.simplelang.SimpleLanguage
Compilation succeeded
Linking compilation into ./www/com.example.simplelang.SimpleLanguage
}}}

If you are using the Eclipse IDE, now would be a good time to import your new project into Eclipse using the *File > Import...* menu option.

==Writing your first application==

Replace the content of `SimpleLanguage` class with the code below to get your application running!

{{{
package com.example.simplelang;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.language.client.LanguageUtils;
import com.google.gwt.language.client.translation.Language;
import com.google.gwt.language.client.translation.Translation;
import com.google.gwt.language.client.translation.TranslationCallback;
import com.google.gwt.language.client.translation.TranslationResult;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.ClickListener;
import com.google.gwt.user.client.ui.HTML;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.Panel;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.TextArea;
import com.google.gwt.user.client.ui.VerticalPanel;
import com.google.gwt.user.client.ui.Widget;

/**
 * Main class for GWT language API demo.
 */
public class SimpleLanguage implements EntryPoint {

  public void onModuleLoad() {

    // Loads the translation API
    LanguageUtils.loadTranslation(new Runnable() {
      public void run() {
        RootPanel.get().add(new HTML("<h1>SimpleLanguage</h1><p>"));
        RootPanel.get().add(createTranslationPanel());
      }
    });
  }

  // Creates translation panel.
  private Panel createTranslationPanel() {
    final TextArea transArea = new TextArea();
    transArea.setPixelSize(200, 100);

    // This is where translation results are put.
    final Label outputLabel = new Label();

    Button translateButton = new Button("Translate");
    translateButton.addClickListener(new ClickListener() {

      public void onClick(Widget sender) {
        Translation.translate(transArea.getText(), Language.ENGLISH,
            Language.SPANISH, new TranslationCallback() {

              @Override
              protected void onCallback(TranslationResult result) {
                if (result.getError() != null) {
                  outputLabel.setText(result.getError().getMessage());
                } else {
                  outputLabel.setText(result.getTranslatedText());
                }
              }
        });
      }
    });

    // Add all widgets to translation panel.
    VerticalPanel transPanel = new VerticalPanel();
    transPanel.add(transArea);
    transPanel.add(translateButton);
    transPanel.add(new Label("Translation result: "));
    transPanel.add(outputLabel);
    return transPanel;
  }
}
}}}

The Language API provides support for loading API using AjaxLoader library. You may use the `LanguageUtils` class to load translation API in this case. When the API javascript is loaded, the `run()` method is executed which loads a simple Language demo. Enter some text in the textarea and click on "Translate" to translate input text from English to Spanish. Check out the screenshot of the running application below:

  http://gwt-google-apis.googlecode.com/svn/wiki/SimpleLanguage.PNG