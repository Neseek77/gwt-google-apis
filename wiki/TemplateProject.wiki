#summary Contributing to the Google API Library for Google Web Toolkit

= Introduction =

The Google API Library for GWT is an adjunct project of the [http://code.google.com/webtoolkit Google Web Toolkit].  Both are open source projects maintaned by Google and other developers and follow the same contributor guidelines.  See [http://code.google.com/webtoolkit/makinggwtbetter.html Making GWT Better] to get started.  This project provides GWT bindings for Google APIs that have been previously released only as JavaScript APIs.

This page will walk through a template project.  The template project is provided as a part of the Google API Library for GWT source tree.


== Design Goals of Existing APIs ==

The AJAX Search, Gadgets, Gears, and Maps APIs were written with the following design goals in mind.


   * Take JavaScript constructs and make them easy to use for Java developers to use.

Primarily, this means using Java's type system to help prevent the user from making coding mistakes.  One example of this can be found in the Event system used in the Maps API.  A decision was made to create a separate Handler class and Event class for each type of event, so that creating a new event with an IDE would allow the IDE to easily create skeleton code.

   * Javadoc should stand on its own.

We copied the documentation of the JavaScript API into the javadoc comments of the methods so that the users of the API could find the information easily, and not have to refer to both documents and guess which JavaScript method or methods mapped to a Java method.
 
   * The API should be small. Optimizable in terms of resulting code size.  

In general we did not create lots of value added functionality on top of the API.  This is to provide a light-weight binding when compiled which should result in smaller downloads of the applications that use the API.

In general, a well written API that meets this design goal should be able to optimize out most of the code in it if only a small subset of the API is referenced by the developer.

   * Wrappers should not incur a large runtime cost.

The bindings should not try to keep large tables or perform excessive calculations, but instead provide as direct a route as possible to the functionality provided by the JavaScript API.

   * Future proof API components that are likely to change.

Many APIs provided by Google have new functionality released on a regular basis.  We want the bindings to be able to add in this new functionality in a backward compatible way.  One of the biggest differences between JavaScript and Java is that it is quite easy for a JavaScript developer to simply tack on new method arguments and not break functionality.  In Java, this can lead to trouble, especially when that method is declared as a part of an `interface`, which is common for  callback methods.  See [DesigningAPIWrappers Binding design guidelines] for a discussion of the Event Handler pattern.

== Build requirements == 

   * (ant, GWT_TOOLS)     
   * Required ant targets
   * eclipse sample projects  
   * Unit tests for wrapped functionality
   * samples

==Directory structure conventions==

The following tree structure shows the directory structure of a template gwt-google-apis project:

{{{
template
|-- build
|   |-- dist
|   |-- lib
|   `-- out
|       |-- distro-source
|       |-- doc
|       |   `-- javadoc
|       |-- template
|       |   |-- bin
|       |   |-- bin-test
|       `-- samples
|           `-- HelloTemplate
|               |-- bin
|               |-- launch-scripts
|               |   |-- linux
|               |   |-- mac
|               |   `-- windows
|               |-- src
|               `-- www
|-- build-tools
|-- distro-source
|   `-- src
|-- doc
|   `-- src
|-- eclipse
|   |-- template
|   |-- samples
|   |   `-- HelloTemplate
|   `-- settings
|       `-- code-style
|-- template
|   |-- javadoc
|   |-- src
|   `-- test
`-- samples
    `-- hellotemplate
        |-- launch-scripts
        |   |-- linux
        |   |-- mac
        |   `-- windows
        `-- src

}}}

|| `template/` || Root of the project that should be named after the API ||
|| `template/build/` || A directory created to hold the results of the build ||
|| `template/build-tools/` || An svn external reference to the GWT project's build-tools ||
|| `template/distro-source/` || Holds files that will be copied the root of the distribution.||
|| `template/eclipse/` || Sample eclipse projects for the API and all samples. ||
|| `template/eclipse/template` || API project. ||
|| `template/eclipse/samples/HelloTemplate` || Example code that uses the API project file. ||
|| `template/template/` || Top level dirctory for the API code.||
|| `template/template/src/` || Contains the source for the API itself that will be packaged into a .jar. ||
|| `template/template/test/` ||U nit test source for the API.||
|| `template/samples/` || Example code that exercises the API.||
|| `template/samples/hellotemplate/` || A directory containing one sample.||


==Package structure==

The convention for the package for API code and test is

 `com.google.gwt.`_project name_`.client.`...

The convention for sample code is:

 `com.google.gwt.`_project name_`.sample.`_sample name_`.client`...

Inside your source code, if you have utility classes or classes needed to bind the JavaScript API to your GWT binding, the convention is to make a subdirectory under `.client` named `.impl`

 `com.google.gwt.`_project name_`.client.impl.`...


==Loading Patterns==

   * Put it in API provided module.gwt.xml
   * Put it in user's .gwt.xml
   * (need ajaxloader sol'n)


